{
  "info": {
    "_postman_id": "a9a16db2-9003-405b-ad53-3ee73964d5ad",
    "name": "HPorterly - API Tests (Local, Synthetic)",
    "description": "Collection Postman generee depuis les endpoints/payloads documentes (donnees synthetiques uniquement).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "00 Health",
      "item": [
        {
          "name": "GET /api/health",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/health"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/ready",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/ready"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 503]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/version",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/version"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "01 Auth",
      "item": [
        {
          "name": "POST /api/auth/login (demandeur)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{requester_username}}\",\n  \"password\": \"{{requester_password}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});",
                  "let d = {}; try { d = pm.response.json(); } catch (e) {}",
                  "if (d.token) { pm.environment.set('requester_token', d.token); pm.environment.set('token', d.token); }",
                  "if (d.user && d.user.id) pm.environment.set('requester_user_id', d.user.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/auth/login (brancardier)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{porter_username}}\",\n  \"password\": \"{{porter_password}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});",
                  "let d = {}; try { d = pm.response.json(); } catch (e) {}",
                  "if (d.token) { pm.environment.set('porter_token', d.token); pm.environment.set('token', d.token); }",
                  "if (d.user && d.user.id) pm.environment.set('porter_user_id', d.user.id);",
                  "if (d.user && d.user.porter_id) pm.environment.set('assigned_porter_id', d.user.porter_id);"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/auth/login (admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{admin_username}}\",\n  \"password\": \"{{admin_password}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});",
                  "let d = {}; try { d = pm.response.json(); } catch (e) {}",
                  "if (d.token) { pm.environment.set('admin_token', d.token); pm.environment.set('token', d.token); }",
                  "if (d.user && d.user.id) pm.environment.set('admin_user_id', d.user.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/auth/me (admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/auth/me"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/auth/logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/auth/logout"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "02 Core Lookup",
      "item": [
        {
          "name": "GET /api/services",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{requester_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/services"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/patients?search",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{requester_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/patients?search={{patient_search}}&limit=10"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/porters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/porters"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/porters/available",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/porters/available"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "03 Tickets",
      "item": [
        {
          "name": "GET /api/tickets",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets?limit=50"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/tickets",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{requester_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patient_id\": \"IPP-100001\",\n  \"patient_name\": \"Alice Martin\",\n  \"origin\": \"Unit A\",\n  \"destination\": \"Imaging\",\n  \"priority\": 3,\n  \"mode\": \"brancard\",\n  \"notes\": \"DEMO DATA - SYNTHETIC / NOT REAL\",\n  \"transport_type\": \"PATIENT\",\n  \"transport_subtype\": \"TP-BRANC\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('ticket_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/tickets/{id}",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{requester_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET recommendations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/recommendations"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST assign",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/assign",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"porter_id\": \"{{assigned_porter_id}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH status -> in_progress",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/status",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"in_progress\",\n  \"comment\": \"Demarrage test\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH notes",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/notes",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"Note operationnelle fictive\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH priority",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/priority",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"priority\": 1,\n  \"reason\": \"Escalade operationnelle fictive\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH equipment-status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/equipment-status",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"delivered\": true,\n  \"label_returned\": false\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET available-porters-for-help",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/available-porters-for-help"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST request-help",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{porter_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/request-help",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"requested_porter_id\": \"{{help_target_porter_id}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.help_request_id; if (v) pm.environment.set('help_request_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "GET my help requests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{porter_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/porters/me/help-requests"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST respond help",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{porter_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/help-requests/{{help_request_id}}/respond",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accepted\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST pause",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/pause"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST cancel",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/cancel"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST hard-delete",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/tickets/{{ticket_id}}/hard-delete",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Suppression de donnee de demo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404, 409]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "04 Admin Users & Porters",
      "item": [
        {
          "name": "GET /api/users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/users",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/users",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{new_user_username}}\",\n  \"password\": \"{{new_user_password}}\",\n  \"role\": \"demandeur\",\n  \"first_name\": \"Nora\",\n  \"last_name\": \"Lefevre\",\n  \"email\": null,\n  \"service\": \"Unit A\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('user_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT /api/users/{id}",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/users/{{user_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Nora\",\n  \"last_name\": \"Martin\",\n  \"service\": \"Unit B\",\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/users/{id}",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/porters",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/porters",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{new_porter_username}}\",\n  \"password\": \"{{new_porter_password}}\",\n  \"first_name\": \"Alex\",\n  \"last_name\": \"Rossi\",\n  \"skills\": [\n    \"O2\",\n    \"LIT\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('porter_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH /api/porters/{id}/skills",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/porters/{{porter_id}}/skills",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"skills\": [\n    \"O2\",\n    \"LIT\",\n    \"URG\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH /api/porters/{id}/status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/porters/{{porter_id}}/status",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"available\",\n  \"location\": \"Unit A\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "05 Notifications",
      "item": [
        {
          "name": "GET /api/notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications?limit=20"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = Array.isArray(d) && d.length ? d[0].id : null; if (v) pm.environment.set('notification_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "GET unread-count",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/unread-count"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST mark-read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/mark-read",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notification_ids\": [\n    \"{{notification_id}}\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST mark-all-read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/mark-all-read"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET preferences",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/preferences"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PATCH preferences",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/preferences",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sound_enabled\": true,\n  \"preferences\": {\n    \"ticket_created\": {\n      \"enabled\": true,\n      \"sound\": true\n    },\n    \"ticket_assigned\": {\n      \"enabled\": true,\n      \"sound\": true\n    },\n    \"ticket_updated\": {\n      \"enabled\": true,\n      \"sound\": false\n    },\n    \"user_message\": {\n      \"enabled\": true,\n      \"sound\": true\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET message-recipients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/message-recipients"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST send-message (admins)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/send-message",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Message de test synthetique\",\n  \"channel\": \"general\",\n  \"target_type\": \"admins\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE notification",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/notifications/{{notification_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "06 Referentials - Services",
      "item": [
        {
          "name": "GET /api/referentials/services",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/services"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/referentials/services/active",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/services/active"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/referentials/services",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/services",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"site_name\": \"Site Demo\",\n  \"building_name\": \"BAT-A\",\n  \"level_name\": \"Niveau 1\",\n  \"zone_name\": \"Unit A\",\n  \"subzone_name\": \"R-101\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('ref_service_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT /api/referentials/services/{id}",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/services/{{ref_service_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"zone_name\": \"Unit A Updated\",\n  \"subzone_name\": \"R-102\",\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/services/{id}",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/services/{{ref_service_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/services/{id}/hard",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/services/{{ref_service_id}}/hard"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "07 Referentials - Equipment",
      "item": [
        {
          "name": "GET /api/referentials/equipment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/equipment"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/referentials/equipment/active",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/equipment/active"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/referentials/equipment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/equipment",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Stretcher Standard\",\n  \"sizes\": [\n    \"S\",\n    \"M\",\n    \"L\"\n  ],\n  \"required_fields\": {\n    \"recipient\": false,\n    \"priority\": true,\n    \"origin\": true,\n    \"destination\": true,\n    \"note_free\": false,\n    \"scheduled\": false\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('ref_equipment_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT /api/referentials/equipment/{id}",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/equipment/{{ref_equipment_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Stretcher Standard Updated\",\n  \"sizes\": [\n    \"M\",\n    \"L\"\n  ],\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/equipment/{id}",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/equipment/{{ref_equipment_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/equipment/{id}/hard",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/equipment/{{ref_equipment_id}}/hard"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "08 Referentials - Transport Modes",
      "item": [
        {
          "name": "GET /api/referentials/transport-modes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/transport-modes"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/referentials/transport-modes/active",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/transport-modes/active"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/referentials/transport-modes",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/transport-modes",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Mode Demo\",\n  \"sort_order\": 99\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('ref_transport_mode_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT /api/referentials/transport-modes/{id}",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/transport-modes/{{ref_transport_mode_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Mode Demo Updated\",\n  \"sort_order\": 100,\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/transport-modes/{id}",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/transport-modes/{{ref_transport_mode_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/transport-modes/{id}/hard",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/transport-modes/{{ref_transport_mode_id}}/hard"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "09 Referentials - Specimens",
      "item": [
        {
          "name": "GET /api/referentials/specimens",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/specimens"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "GET /api/referentials/specimens/active",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/specimens/active"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST /api/referentials/specimens",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/specimens",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Specimen Demo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([201, 400, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "let d = null; try { d = pm.response.json(); } catch (e) {}",
                  "try { const v = d && d.id; if (v) pm.environment.set('ref_specimen_id', v); } catch (e) {}"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT /api/referentials/specimens/{id}",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/specimens/{{ref_specimen_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Specimen Demo Updated\",\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 400, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/specimens/{id}",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/specimens/{{ref_specimen_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "DELETE /api/referentials/specimens/{id}/hard",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": "{{baseUrl}}/api/referentials/specimens/{{ref_specimen_id}}/hard"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code accepted', function () {",
                  "  pm.expect([200, 401, 403, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://127.0.0.1:8080",
      "type": "string"
    }
  ]
}
